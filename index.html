<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title>Truth Tables</title>
      <script type="text/javascript" src="constants.js"></script>
      <script type="text/javascript" src="understanding.js"></script>
      <script type="text/javascript" src="logic.js"></script>
      <script type="text/javascript" src="truth.js"></script>
      <link rel="stylesheet" href="appearance.css">
      <link rel="icon" href="favicon.ico" />
      <script type="text/javascript">
         function copyToClipboard(elem) {
            elem.select();
            document.execCommand("Copy");
         }
         function copyAsJSON() {
            copyToClipboard(document.getElementById("json-table"));
            notify();
         }
         function copyAsORG() {
            copyToClipboard(document.getElementById("org-table"));
            notify();
         }

         function notify() {
            document.querySelector('.notify').classList.add('show');
            setTimeout(_=>document.querySelector('.notify').classList.remove('show'), 2000)
         }
      </script>
   </head>
   <body onload="document.getElementById('raw-input').focus()">
      <main>
         <h1>Truth Table Generator</h1>
         <hr>
         <p>
            Type in an expression, then hit the [Evaluate] button to see the results.
         </p>
         <form onsubmit="return false;">
            <input type="text" id="raw-input" placeholder="Example: p ∨ ¬q">
            <input type="submit" class="eval" onclick="main()" value="Evaluate">
         </form>
         <br/><br/>
         <div id="raw-results">
         </div>
         <div class="notify">Copied!</div>
         <div class="box-70">
            <input type="button" onclick="copyAsORG()" value="Copy as ORG Table">
            <textarea id='org-table'></textarea>
         </div>
         <div class="box-30">
            <input type="button" onclick="copyAsJSON()" value="Copy as JSON"><br/>
            <textarea id='json-table'></textarea>
         </div>
      </main>
      <div class="credits">
         Created by <a href="https://github.com/kyle-west">Kyle West</a> <br>
         Hosted on <a href="https://github.com/kyle-west/truthfulness">GitHub</a>
      </div>

      <script>
         // return the cursor to its "original" position after pretty print
         document.getElementById("raw-input").addEventListener("input", (e) => {
            var prettyText = interpretSymbols(e.target.value);
            var cursorPos  = e.target.selectionStart + prettyText.sizeDiff;
            e.target.value = prettyText.text;
            e.target.setSelectionRange(cursorPos, cursorPos);
         });
      </script>
   </body>
</html>
